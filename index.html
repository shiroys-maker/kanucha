<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>患者情報フォーム</title>
  <style>
    .row { display: flex; gap: 10px; margin-bottom: 10px; }
    .column { display: flex; flex-direction: column; }
    textarea { height: 4em; width: 100%; }
  </style>
</head>
<body>
  <h2>患者情報</h2>

  <form id="form">
    <div class="row">
      <div class="column">
        ID: <input name="id" required>
      </div>
      <div class="column">
        名前: <input name="名前" required>
      </div>
      <div class="column">
        生年月日: <input name="生年月日" type="date" required>
      </div>
      <div class="column">
        性別:
        <select name="性別">
          <option value="男性">男性</option>
          <option value="女性">女性</option>
        </select>
      </div>
      <div class="column">
        年齢: <input name="年齢" readonly>
      </div>
    </div>

    <div class="column">
      受診日: <input name="受診日" type="date" id="visitDate">
    </div>

    <h3>診療履歴: 看護師</h3>
    <div class="row">
      <div class="column">
        血圧: <input name="血圧">
      </div>
      <div class="column">
        脈: <input name="脈">
      </div>
      <div class="column">
        体温: <input name="体温">
      </div>
      <div class="column">
        SAT: <input name="SAT">
      </div>
    </div>

    来院の目的: <textarea name="来院の目的"></textarea><br>
    既往歴: <textarea name="既往歴"></textarea><br>
    内服薬: <textarea name="内服薬"></textarea><br>
    アレルギー: <textarea name="アレルギー"></textarea><br>

    <h3>診療履歴: 医師</h3>
    診察所見: <textarea name="診察所見"></textarea><br>
    診断名: <textarea name="診断名"></textarea><br>
    投薬内容: <textarea name="投薬内容"></textarea><br>
    備考: <textarea name="備考"></textarea><br>

    <button type="submit">更新</button>
  </form>

  <script>
    // 年齢自動計算
    document.querySelector('[name="生年月日"]').addEventListener('change', function() {
      const birth = new Date(this.value);
      const today = new Date();
      let age = today.getFullYear() - birth.getFullYear();
      if (
        today.getMonth() < birth.getMonth() ||
        (today.getMonth() === birth.getMonth() && today.getDate() < birth.getDate())
      ) {
        age--;
      }
      document.querySelector('[name="年齢"]').value = age;
    });

    // 受診日を本日に設定（編集可）
    document.getElementById('visitDate').valueAsDate = new Date();
  </script>
</body>
</html>